FROM golang:1.21-alpine

WORKDIR /app/backend

COPY backend/go.mod backend/go.sum ./
RUN go mod download

COPY backend/ ./

RUN CGO_ENABLED=1 GOOS=linux go build -o main.exe .

EXPOSE 8080
EXPOSE 3000
EXPOSE 9000

CMD ["go", "run", "main.go"]

RUN apk add --no-cache git
RUN apk add --no-cache curl
RUN apk add --no-cache wget
